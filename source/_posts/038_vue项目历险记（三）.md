---
id: 038
title: vue项目历险记（三）
date: 2018-11-27 17:13:24
tags:
  - JavaScript
  - vue.js
categories:
---

> 在这篇文章中，主要记录一些在使用`vue.js`写业务时遇到的一些问题及其解决方式，还有一些小技巧。

- <a href="#entry">1. 配置入口文件</a>
- <a href="#AppVue">2. 根路由App.vue的配置</a>
- <a href="#vueRouter">3. vue.js SPA的路由的配置</a>


#### <a name="entry">1、配置入口文件</a>
  1. 使用`vue-cli`快速构建的应用，会在项目src/目录下生成一个入口文件`app.js(index.js)`，在这里vue.js的引用，路由配置等等工作就可以初始化了。当然也可以引入公共的资源文件(.js/.css)。
  2. 首先引入当前目录的根组件<a href="#AppVue">`App.vue`</a>和<a href="#vueRouter">`router.js`</a>，以及`vuex`、`mixin`，最后实例化根组件，基本如下：
      ``` js
      import App from './App'
      import router from './router/router'

      // 全局css
      import './assets/css/common.scss'

      // 全局配置
      import './config'

      // axios 配置
      import './assets/js/axios.conf'

      // import store from './store'

      // Vue mixin
      import './assets/js/mixin'

      // 日历组件
      import Calendar from '../static/js/libs/calendar'
      Vue.use(Calendar)

      Vue.config.productionTip = false

      // 切换路由
      // import './assets/js/router.switch'

      new Vue({
        el: '#app',
        router,
        // store,
        components: { App },
        template: '<App/>'
      })

      ```


#### <a name="AppVue">2、根路由App.vue的配置</a>
  1. 作为引用根组件，App.vue还是很好理解的，就是所有页面的入口：
      ```js
        <template>
          <div id="app">
            <div class="invalidRoute" v-if="invalidRoute"></div>
            <div class="modal-forbidden-operate"></div>

            <router-view></router-view>
          </div>
        </template>

        <script>

        export default {
          name: 'App',
          created () {
            
          },
          // update 里面的函数在每次路由切换时只执行一次，非常棒；而mounted不行
          updated () {
            this.setShareConfig();
          },
          computed: {
            invalidRoute () {
              return !this.$route.matched || this.$route.matched.length === 0;
            }
          }
        }
        </script>

      ```
  2. 和所有页面(.vue)一样，他的`template`标签下只允许有一个`div`标签。但是该文件下还得有一对`<router-view></router-view>`标签，用以表明所有页面路由的嵌套入口，页面最终都是从这里注入的。

#### <a name="vueRouter">3、vue.js SPA的路由的配置</a>


