---
id: 039
title: vue.js单页应用在微信浏览器中的使用
date: 2018-11-29 16:23:12
tags:
  - JavaScript
  - vue.js
categories:
---

> 这篇文章来总结一下在微信浏览器中使用vue.js开发单页应用是遇到的一些坑。因为配合微信，我们有很多特殊的需求，所以处理起来会有所不同。

- <a href="#share">1. 微信分享</a>



#### <a name="dependencies">1、微信分享</a>
1. 这里简单把微信分享分成两种情况，`一是`：进入页面后，需要用户手动点击触发获取签名的按钮，然后再去右上角分享的；`二是`：进入页面时，自动获取分享签名，用户可以直接右上角分享。
2. 第一种情况的比较简单，用户主动点击按钮时调取分享签名即可。
3. 第二种情况稍微麻烦一点，由于单页应用的原因，默认分享的签名是在进入的第一个页面获取的。当进入到其他页面时，即使调用了签名，由于传入的`url`不合法，导致签名失败，但是这种情况只会出现在`Ios`操作系统上，`Android`上并没有出现。当时也找了很多方法，最终的解决方案是，进入该页面的方式由`vue-router`提供的`this.$router.push()`方法改为`location.href`的方式，这时签名就可以正常获取了。
4. 出现这种情况的原主要是，`vue-router`使用`history`模式下，`ios`微信浏览器会使用单页应用第一次的`url`去签名，这样签名的url和实际的url不一致，直接导致签名的失败。
